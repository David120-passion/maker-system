1.在项目启动时，dydx需要监听每个账户的账户订单情况，订阅方式如下
订阅地址 wss://dydx3.forcast.money/v4/ws，直接使用DydxMarketDataConnector
握手后根据账户发送 {"type":"subscribe","channel":"v4_subaccounts","id":"h21w7huehzl52l08q2y2uwumps98kvet8mycrhfsu/0","marketType":"SPOT"}
id为address/0
2.订阅成功后，如果账户存在订单会推送{"type":"subscribed","connection_id":"4d7dad40-4581-4393-adcf-b7bb6039f4fe","message_id":1,"channel":"v4_subaccounts","id":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt/0","contents":{"subaccount":{"address":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt","subaccountNumber":0,"equity":"0","freeCollateral":"0","openPerpetualPositions":{},"assetPositions":{"USDT":{"symbol":"USDT","side":"LONG","size":"1400578.2411","assetId":"0","subaccountNumber":0},"ORCL":{"symbol":"ORCL","side":"LONG","size":"500060","assetId":"12","subaccountNumber":0},"BTC":{"symbol":"BTC","side":"LONG","size":"0.9662","assetId":"3","subaccountNumber":0}},"marginEnabled":true,"updatedAtHeight":"401339","latestProcessedBlockHeight":"401375"},"orders":[{"id":"a202f315-8bbd-5391-9393-6ff5559012d4","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","clientId":"982046810","clobPairId":"1000001","side":"BUY","size":"3","totalFilled":"0","price":"111","type":"LIMIT","status":"OPEN","timeInForce":"GTT","reduceOnly":false,"orderFlags":"64","goodTilBlockTime":"2026-01-08T11:32:05.000Z","createdAtHeight":"401224","clientMetadata":"0","updatedAt":"2025-12-11T11:32:05.410Z","updatedAtHeight":"401224","orderRouterAddress":"","marketType":"SPOT","spotMarketId":"1000001","postOnly":false,"ticker":"ETH-USDT","subaccountNumber":0},{"id":"4b73b31a-d9eb-5a17-a7f2-05718c9bd7b9","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","clientId":"804026661","clobPairId":"1000001","side":"BUY","size":"2","totalFilled":"0","price":"111","type":"LIMIT","status":"OPEN","timeInForce":"GTT","reduceOnly":false,"orderFlags":"64","goodTilBlockTime":"2026-01-08T11:32:01.000Z","createdAtHeight":"401217","clientMetadata":"0","updatedAt":"2025-12-11T11:32:01.837Z","updatedAtHeight":"401217","orderRouterAddress":"","marketType":"SPOT","spotMarketId":"1000001","postOnly":false,"ticker":"ETH-USDT","subaccountNumber":0}],"blockHeight":"401375"}}
2.下单成功后，会推送{"type":"channel_data","connection_id":"ada2fa1d-c8bf-43a7-aa8e-e1a5f4433ec2","message_id":42,"id":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt/0","channel":"v4_subaccounts","version":"3.0.0","contents":{"orders":[{"id":"75b1f7ab-63ce-549c-a9eb-d6511ede6aaa","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","clientId":"932574801","clobPairId":"1000001","side":"BUY","size":"1","price":"111","status":"OPEN","type":"LIMIT","timeInForce":"GTT","postOnly":false,"reduceOnly":false,"orderFlags":"64","goodTilBlockTime":"2026-01-08T11:11:54.000Z","ticker":"ETH-USDT","createdAtHeight":"398864","updatedAt":"2025-12-11T11:11:53.657Z","updatedAtHeight":"398864","clientMetadata":"0"}],"blockHeight":"398862"}}
3.取消订单后，会推送{"type":"channel_data","connection_id":"4d7dad40-4581-4393-adcf-b7bb6039f4fe","message_id":3,"id":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt/0","channel":"v4_subaccounts","version":"3.0.0","contents":{"orders":[{"id":"a202f315-8bbd-5391-9393-6ff5559012d4","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","clientId":"982046810","clobPairId":"1000001","side":"BUY","size":"3","totalFilled":"0","price":"111","type":"LIMIT","status":"CANCELED","timeInForce":"GTT","postOnly":false,"reduceOnly":false,"orderFlags":"64","goodTilBlockTime":"2026-01-08T11:32:05.000Z","ticker":"ETH-USDT","removalReason":"ORDER_REMOVAL_REASON_USER_CANCELED","createdAtHeight":"401224","updatedAt":"2025-12-11T11:34:21.677Z","updatedAtHeight":"401490","clientMetadata":"0"}],"blockHeight":"401488"}}
4.如果是全部成交，{"type":"channel_data","connection_id":"497db8c9-ed6c-4d14-ba25-618748fc75cc","message_id":34,"id":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt/0","channel":"v4_subaccounts","version":"3.0.0","contents":{"fills":[{"id":"ed500296-d275-53dd-9fd7-3e1df593f70d","fee":"0","side":"BUY","size":"1","type":"LIMIT","price":"98","eventId":"001041de0000000200000002","orderId":"2b35488b-02fb-525d-98c4-8eedf2dc151b","createdAt":"2025-12-15T10:55:33.323Z","liquidity":"MAKER","builderFee":null,"clobPairId":"1000002","marketType":"SPOT","quoteAmount":"98","spotMarketId":"1000002","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","builderAddress":null,"clientMetadata":"0","orderRouterFee":null,"createdAtHeight":"1065438","transactionHash":"81F352B5FC9C335ADC6B65694B89A2087D6CAC17C643943E4646926271850B4B","affiliateRevShare":"0","orderRouterAddress":null,"ticker":"BTC-USDT"}],"blockHeight":"1065438","orders":[{"id":"2b35488b-02fb-525d-98c4-8eedf2dc151b","side":"BUY","size":"1","type":"LIMIT","price":"98","feePpm":null,"status":"FILLED","clientId":"1701620846","duration":null,"interval":null,"updatedAt":"2025-12-15T10:55:33.323Z","clobPairId":"1000002","marketType":"SPOT","orderFlags":"64","reduceOnly":false,"timeInForce":"GTT","totalFilled":"1","goodTilBlock":null,"spotMarketId":"1000002","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","triggerPrice":null,"builderAddress":null,"clientMetadata":"0","priceTolerance":null,"createdAtHeight":"1065388","updatedAtHeight":"1065438","goodTilBlockTime":"2026-01-12T10:55:06.000Z","orderRouterAddress":"","postOnly":false,"ticker":"BTC-USDT"}]}}
4.如果是部分成交，会推送 {"type":"channel_data","connection_id":"4d7dad40-4581-4393-adcf-b7bb6039f4fe","message_id":48,"id":"h21lmflgzs766v7syh44j2fe286f75auxt6xgx0mt/0","channel":"v4_subaccounts","version":"3.0.0","contents":{"fills":[{"id":"fe35aeb0-6ef3-5a38-939a-cec397062e85","fee":"0","side":"SELL","size":"7.01","type":"LIMIT","price":"196.5","eventId":"000624ec0000000200000002","orderId":"4878be56-b8d1-55ee-9c14-1fcda027be03","createdAt":"2025-12-11T11:44:25.327Z","liquidity":"MAKER","builderFee":null,"clobPairId":"1000011","marketType":"SPOT","quoteAmount":"1377.465","spotMarketId":"1000011","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","builderAddress":null,"clientMetadata":"0","orderRouterFee":null,"createdAtHeight":"402668","transactionHash":"A801D3583037B7011E71ABD0DB0B3319A18C41BDAD663A17683CAAE77D486B07","affiliateRevShare":"0","orderRouterAddress":null,"ticker":"ORCL-USDT"},{"id":"f2e3e3a9-a64a-5f29-9064-35d5fb496e48","fee":"0","side":"SELL","size":"6.61","type":"LIMIT","price":"196.5","eventId":"000624ec0000000200000005","orderId":"4878be56-b8d1-55ee-9c14-1fcda027be03","createdAt":"2025-12-11T11:44:25.327Z","liquidity":"MAKER","builderFee":null,"clobPairId":"1000011","marketType":"SPOT","quoteAmount":"1298.865","spotMarketId":"1000011","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","builderAddress":null,"clientMetadata":"0","orderRouterFee":null,"createdAtHeight":"402668","transactionHash":"A801D3583037B7011E71ABD0DB0B3319A18C41BDAD663A17683CAAE77D486B07","affiliateRevShare":"0","orderRouterAddress":null,"ticker":"ORCL-USDT"}],"blockHeight":"402668","orders":[{"id":"4878be56-b8d1-55ee-9c14-1fcda027be03","side":"SELL","size":"100","type":"LIMIT","price":"196.5","feePpm":null,"status":"OPEN","clientId":"533126548","duration":null,"interval":null,"updatedAt":"2025-12-11T11:44:25.327Z","clobPairId":"1000011","marketType":"SPOT","orderFlags":"64","reduceOnly":false,"timeInForce":"GTT","totalFilled":"21.04","goodTilBlock":null,"spotMarketId":"1000011","subaccountId":"36cd4759-4a07-5282-9542-f9ab450f0ef4","triggerPrice":null,"builderAddress":null,"clientMetadata":"0","priceTolerance":null,"createdAtHeight":"402608","updatedAtHeight":"402668","goodTilBlockTime":"2026-01-08T11:43:54.000Z","orderRouterAddress":"","postOnly":false,"ticker":"ORCL-USDT"}]}}
备注：orders是订单，在订阅成功后存在多笔订单会推送多笔，clientId是客户端自定义的id  根据这个去匹配订单，通过以上这些信息去维护OrderManagementSystem